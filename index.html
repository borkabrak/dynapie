<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="dynamic-piechart.css">
    <script src="/script/jquery/jquery.js"></script>
    <script src="/script/raphael/raphael.js"></script>
    <script src="dynamic-piechart.js"></script>
    <title>Dynamic Pie Chart Demo</title>
    <script>

    function log(string){
        console.log(string);
        $("#console").append("<p>&#10097; " + string + "</p>");
    };

    $(function(){
        var entries = {
            "css": 15,
            "html": 40,
            "javascript": 50 
        };

        piechart = Raphael("holder", 800, 500).pieChart(entries);

        $("button#addsector").click(function(){
            piechart.add_sector( $("#label").val(), $("#value").val()); 
            $("#value").val( parseInt(Math.random() * 100) );
        });

        $("button#removesector").click(function(){
            var removed = piechart.remove_sector($("#remove_this").val());
            if (removed && Object.keys(removed)[0] !== ""){
                $("input#label").val( Object.keys(removed)[0] );
                $("input#value").val( removed[Object.keys(removed)[0]] );
            };
        });

        $("button#clear_console").click(function(){
            $("#console").html(" ");
        });


        $("#value").val( parseInt(Math.random() * 100) );

    });
    </script>
</head>
<body>

    <h1>Dynamic Pie Chart Demo</h1>

    <div id="holder"></div>

    add_sector(<input id="label" placeholder="Label" value="Sample Label">,
    <input id="value" placeholder="Value" value="20">)
    <button id="addsector">go</button>

    <br>
    <br>

    remove_sector(<input id="remove_this" placeholder="What to remove">)
    <button id="removesector">go</button>

    <br>
    <br>
    <div id="console"> </div>
    <button id="clear_console">Clear Console</button>

</body>
<script src="utils.js"></script>    <!-- test utils.  can be thrown away for prod -->
</html>
